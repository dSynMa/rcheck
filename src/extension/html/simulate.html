<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulator: {%=fname%}</title>
    <script type="module" src="{%= elementsUri %}"></script>

</head>

<body>
    <h1>R-CHECK simulator: {%=fname%}</h1>
    <vscode-form-group>
        <vscode-label for="select-transition">Transition:</vscode-label>
        <vscode-single-select id="select-transition">
            <!-- <vscode-option description="Consectetur adipiscing elit">Lorem</vscode-option>
            <vscode-option selected description="Donec elit odio">Ipsum</vscode-option>
            <vscode-option description="Aliquam ac vulputate eros">Dolor</vscode-option> -->
        </vscode-single-select>
        <vscode-button onclick="next()">Next</vscode-button>
        <vscode-button secondary onclick="back()">Back</vscode-button>
    </vscode-form-group>
    <script>
        const vscode = acquireVsCodeApi();
        function next() { vscode.postMessage({ command: 'next' }); }
        function back() { vscode.postMessage({ command: 'back' }); }

        const select = document.getElementById("select-transition");

        window.addEventListener('message', event => {
            const message = event.data; // The JSON data our extension sent
            switch (message.command) {
                case 'update-transitions':
                    while (select.firstChild) { select.removeChild(select.lastChild); }
                    for (let index = 0; index < message.content.length; index++) {
                        const element = message.content[index];
                        const option = document.createElement("vscode-option");
                        option.setAttribute("description", element.send)
                        option.textContent = element.sender + '-> ' + element.receivers.join(", ");
                        select.appendChild(option);
                    }
                    break;
            }
        });
    </script>
    <!-- <script type="module" src="node_modules/@vscode-elements/elements/dist/vscode-button/index.js"></script> -->
</body>

</html>